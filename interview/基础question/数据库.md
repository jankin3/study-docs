# 数据库

1. 什么是索引，索引有什么作用
2. 索引的分类（聚簇索引和非聚簇索引、普通索引和唯一索引）
3. innodb索引数据结构（b+树）、为什么innodb要用b+树、索引树叶子节点和非叶子节点的区别
4. 常见查询优化手段
5. 联合索引的性质，覆盖索引的概念
6. 如何给字符串建立索引
7. MySQL如何选择索引？哪些情况下会出现索引失效
8. 事务是什么、事务的acid原则
9. 事务的四种隔离级别、CR和RR分别解决了什么问题
10. innoDB如何解决幻读
11. innoDB锁的分类
12. 什么是死锁、如何避免死锁
13. 知道哪些mysql数据库引擎？innodb和myisam的区别
14. char和varchar的区别、int和tinyint的区别、varchar(11)和int(11)是什么意思
15. 什么是回表操作
16. 了解binlog和redo log的作用和区别吗？innoDB如何实现MVCC，如何实现事务回滚操作
17. MySQL主从复制过程是什么
18. innoDB如何删除数据（标记删除or物理删除）？页空洞、页分裂、页合并了解吗？如何重建索引？
19. 一条SQL语句的执行过程
20. MySQL如何实现group by？如何实现join操作？





















解答：

1. 索引是有序的数据结构，可以提高查询效率．缺点是增加删除修改的时候也需要维护索引，速度变慢，同时加大了空间占用．
2. 按照类别, 主键索引,唯一索引,普通索引, 按照位置, 聚簇索引,非聚簇索引
3. + 哈希不能满足范围查询, 排序等的情景,以及会造成哈希冲突造成效率很低,不能联合索引,不能用来排序
   + b树因为飞叶子节点存储了数据的原因所以遍历树的时候会带来大量随机io,降低效率

4. 1. 确定只拿需要的数据,避免select *
   2. 建立适当的索引, where和order by
   3. 联合索引代替多个单列索引,最左匹配原则
   4. 分解为多个查询

5. 存储上是多个字段的数据作为一个整体存储, 符合最左匹配原则,查询可以用到左侧的一列或者多列

6. 选择合适的区分长度, 建立前缀索引或者全字段索引

7. 查询优化器, 字符集不同, 优化器判断全局扫描更加高效,函数处理

8. 略

9. 略

10. 快照读中使用mvcc, 当前读中使用next-key 锁

11. 死锁:多个事务竞争资源造成互相等待的状态

    避免: 事后, 等待图检测,检测到等待图出现闭环之后回滚.事前, 建立适当的索引, 合理的顺序请求资源,一次性锁住全部的资源

10. 略

11. binary log 二进制日志,在mysql server层,每个引擎都可以有

    redo log, innode 引擎日志,主要用来持久化

    undo log 主要用来回滚事务

12. 略

13. 略

14. 略

15. 略

16. 略

17. 略

18. 略

19. 略

20. 略